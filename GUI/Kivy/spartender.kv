#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#: import WipeTransition kivy.uix.screenmanager.WipeTransition
#: import SlideTransition kivy.uix.screenmanager.SlideTransition
#: import SwapTransition kivy.uix.screenmanager.SwapTransition

# ScreenManager:
#     transition: SlideTransition(duration = 0.55)
#     MainScreen:
#     DrinksScreen:
#     MixedDrinksScreen:
#     ShotsDrinksScreen:
#     SodaDrinksScreen:
#     ConfigScreen:
#     KeypadPopup:
#     # KeyboardPopup:
#     # SettingsScreen:


<MainScreen>:
    name: 'main'
    # settingsImage: settingsBtn
    settingsImage: settingsImg
    drinksImage: drinksImg
    configImage: configImg

    # Title
    Label:
        id: title
        text: 'Spartender'
        size_hint: (.65, .4)
        pos_hint: {'center_x': .5, 'top': .95}
        font_size: 127
        color: app.secondary
        font_name: 'assets/fonts/NCAAMichiganStSpartans.otf'

    # Hidden button to get back to the settings
    LongpressButton:
        long_press_time: 3
        # on_press: lambda w: setattr(w, 'text', 'Pressed')
        # on_long_press: lambda w: setattr(w, 'text', 'Long press')
        # on_long_press: app.open_settings()
        on_long_press: root.show_pin_popup(type = 'settings')
        size_hint: (.05, .05)
        pos_hint: {'left': 1, 'top': 1}
        background_color: 0,0,0,0
        # color: 1,1,1,1
        text: ''
        font_size: 22

    # Quit Button
    Button:
        on_press: quit()
        size_hint: (.05, .05)
        pos_hint: {'right': 1, 'top': 1}
        background_color: (0.09411,0.270588,0.231372,1) #app.primary
        color: 1,1,1,1
        text: 'x'
        font_size: 22

    # # Main Screen Buttons Layout
    # BoxLayout:
    #     orientation: 'horizontal'
    #     size_hint: .9, .5
    #     pos_hint: {'center_x': .5, 'y': 0.06}
    #     # padding_left: 10
    #     # padding_right: 10

    # Config Button
    Button:
        id: configBtn
        on_press: root.do_pressed('c', './assets/design/ConfigBtnPressed.PNG'); root.manager.transition.direction = 'right'
        on_release: root.do_released('c', './assets/design/ConfigBtn.PNG'); app.root.current = 'config'
        #on_state: print("Current state: {}".format(self.state))
        borderless: True
        size_hint: (.26, .45)
        pos_hint: {'x': .04, 'y': .08}

        # background_color: app.primary #rgba(255,255,255,1)
        background_color: (0,0,0,0)

        # always_release: True
        # color: 0.09411,0.270588,0.231372,1 #rgba(24,69,59,1)
        # text: 'Config'
        # font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        # font_size: 32

        Image:
            id: configImg
            source: './assets/design/ConfigBtn.PNG'
            size: self.parent.width, self.parent.height
            x: self.parent.x
            y: self.parent.y


    # Drinks Button
    Button:
        id: drinksBtn

        on_press: root.do_pressed('d', './assets/design/DrinksBtnPressed.PNG'); root.manager.transition.direction = 'up'
        on_release: root.do_released('d', './assets/design/DrinksBtn.PNG'); root.goto_drinks() #app.root.current = 'drinks'
        # on_state: print("my current state is {}".format(self.state))
        size_hint: (.38, .45)
        pos_hint: {'center_x': .5, 'y': .08}
        # background_color: app.primary #rgba(255,255,255,1)
        background_color: (0,0,0,0)

        Image:
            id: drinksImg
            source: './assets/design/DrinksBtn.PNG'
            size: self.parent.width, self.parent.height
            x: self.parent.x
            y: self.parent.y


    # Settings Button
    # TODO: Add animations to the pictures
    Button:
        id: settingsBtn

        on_press: root.do_pressed('s', './assets/design/SettingsBtnPressed.PNG'); app.root.transition = SlideTransition(direction='right')
        on_release: root.do_released('s', './assets/design/SettingsBtn.PNG'); app.open_settings()
        background_color: (0,0,0,0)
        size_hint: (.26, .45)
        pos_hint: {'right': .96, 'y': .08}

        Image:
            id: settingsImg
            source: './assets/design/SettingsBtn.PNG'
            x: self.parent.x
            y: self.parent.y
            size: self.parent.width, self.parent.height

<DrinksScreen>:
    name: 'drinks'
    nameText: nameTxt
    creditsText: credTxt

    name: 'drinks'
    nameText: nameTxt
    creditsText: credTxt

    Label:
        id: nameTxt
        size_hint: (.35, .18)
        pos_hint: {'x': .06, 'top': .99}
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 24
        background_color: (.4,.4,.4,1)
        text: 'NameError'
        text_size:self.size
        halign:'left'
        valign:'middle'
        # canvas.before:
        #     Color:
        #         rgba: 1, .5, 0, 1
        #     Rectangle:
        #         pos: self.pos
        #         size: self.size

    Label:
        id: credTxt
        size_hint: (.35, .18)
        pos_hint: {'right': .94, 'top': .99}
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 24
        text: 'CreditsError'
        text_size:self.size
        halign:'right'
        valign:'middle'
        # canvas.before:
        #     Color:
        #         rgba: 1, .5, 0, 1
        #     Rectangle:
        #         pos: self.pos
        #         size: self.size

    # Back Button
    Button:
        on_press: root.manager.transition.direction = 'down'
        on_release: app.root.current = 'main'
        size_hint: (.18, .18)
        pos_hint: {'center_x': .5, 'top': 1}
        text: '[b]^[/b]\nBack'
        markup: True
        halign: 'center'
        valign: 'center'
        background_color: 0, 0, 0, 0
        # text_size: cm(6), cm(4)
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 32

    BoxLayout:
        orientation: 'horizontal'
        size_hint: .75,.75
        pos_hint: {'center_x': .5, 'center_y': .44}
        spacing: 15

        BoxLayout:
            orientation: 'horizontal'

            # Mixed Drinks Button
            Button:
                id: configBtn
                on_press: root.manager.transition.direction = 'right'
                on_release: app.root.current = 'mixedDrinks'
                # size_hint: (.35, .65)
                # pos_hint: {'x': .1, 'center_y': .44}
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 0.09411,0.270588,0.231372,1 #rgba(24,69,59,1)
                text: 'Mixed Drinks'
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
                font_size: 32

        BoxLayout:
            orientation: 'vertical'
            spacing: 15

            # Shots Button
            Button:
                on_press: root.manager.transition.direction = 'left'
                on_release: app.root.current = 'shotsDrinks'
                # size_hint: (.35, .30)
                # pos_hint: {'x': .55, 'top': .86}
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 0.09411,0.270588,0.231372,1 #rgba(24,69,59,1)
                text: 'Shots'
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
                font_size: 32

            # Soda Button
            Button:
                on_press: root.manager.transition.direction = 'up'
                on_release: app.root.current = 'sodaDrinks'
                # size_hint: (.35, .30)
                # pos_hint: {'x': .55, 'y': .14}
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 0.09411,0.270588,0.231372,1 #rgba(24,69,59,1)
                text: 'Soda'
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
                font_size: 32

<MixedDrinksScreen>:
    name: 'mixedDrinks'

    # Put mixed drinks list here
    # ScrollView:
    #     BoxLayout:
    #         orientation: 'vertical'
    #         text: "Work"
    #         values: "Work", "Home", "Mobile", "Skype"
    #         # size_hint: (.25, .25)
    #         # size: (200, 200)
    RecycleView:
        data:[{'text': str(x),'size_hint':(1,None)} for x in range(50)]
        viewclass: 'Button'
        RecycleBoxLayout:
            size_hint: (.5,None)
            background_color: [.5,.5,.5,1]
            pos_hint: {"x":.15,"y":.85}
            height: self.minimum_height
            orientation: 'vertical'

    # Back Button
    Button:
        on_press: root.manager.transition.direction = 'left'
        on_release: app.root.current = 'drinks'
        size_hint: (.18, .18)
        pos_hint: {'right': 1, 'center_y': .5}
        background_color: 0, 0, 0, 0
        text: 'Back  >'
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 32

<ShotsDrinksScreen>:
    name: 'shotsDrinks'

    # Back Button
    Button:
        on_press: root.manager.transition.direction = 'right'
        on_release: app.root.current = 'drinks'
        size_hint: (.18, .18)
        pos_hint: {'left': 1, 'center_y': .5}
        background_color: 0, 0, 0, 0
        text: '<  Back'
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 32

<SodaDrinksScreen>:
    name: 'sodaDrinks'

    # Back Button
    Button:
        on_press: root.manager.transition.direction = 'down'
        on_release: app.root.current = 'drinks'
        size_hint: (.18, .18)
        pos_hint: {'center_x': .5, 'top': 1}
        text: '[b]^[/b]\nBack'
        markup: True
        halign: 'center'
        valign: 'center'
        background_color: 0, 0, 0, 0
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 32

<ConfigScreen>:
    name: 'config'

    # Back Button
    Button:
        on_press: root.manager.transition.direction = 'left'
        on_release: app.root.current = 'main'
        size_hint: (.18, .18)
        pos_hint: {'right': 1, 'center_y': .5}
        background_color: 0, 0, 0, 0
        text: 'Back  >'
        font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
        font_size: 32

    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        size_hint: .85, .9
        pos_hint: {'left': .85, 'center_y': .5}

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint_y: .65

            Slider:
                id: slider_vodka
                min: 0
                max: 1750
                step: 1
                # background_width: sp(50)
                # value_track: True
                # value_track_color: 0, 0, 0, 0
                orientation: 'vertical'

            Slider:
                id: slider_rum
                min: 0
                max: 1750
                step: 1
                orientation: 'vertical'

            Slider:
                id: slider_soda1
                min: 0
                max: 1750
                step: 1
                orientation: 'vertical'

            Slider:
                id: slider_soda2
                min: 0
                max: 1750
                step: 1
                orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint_y: .25

            Label:
                id: label_vodka_value
                halign: 'center'
                text: '%smL\nVodka' % int(slider_vodka.value) if slider_vodka.value else '0mL\nVodka'

            Label:
                id: label_rum_value
                halign: 'center'
                text: '%smL\nRum' % int(slider_rum.value) if slider_rum.value else '0mL\nRum'

            Label:
                id: label_soda1_value
                halign: 'center'
                text: '%smL\nSprite' % int(slider_soda1.value) if slider_soda1.value else '0mL\nSprite'

            Label:
                id: label_soda2_value
                halign: 'center'
                text: '%smL\nCoke' % int(slider_soda2.value) if slider_soda2.value else '0mL\nCoke'


<KeypadPopup>:
    name: 'keypadPopup'

    pin1Observer: pin1
    pin2Observer: pin2
    pin3Observer: pin3
    pin4Observer: pin4

    size_hint: .8, .8

    # Opens settings after long press is successful
    on_verification: app.open_settings()

    # This is for all of the layouts
    BoxLayout:
        orientation: 'vertical'
        spacing: 10

        # This is for the entered Pin Numbers
        BoxLayout:
            orientation: 'horizontal'
            spacing: 0
            pos_hint: {'center_x': .5, 'top': .9}

            Label:
                id: pin1
                text: "____"
                size_hint: (.15, .2)
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 1,1,1,1
                font_size: 32
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'


            Label:
                id: pin2
                text: "____"
                size_hint: (.15, .2)
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 1,1,1,1
                font_size: 32
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'

            Label:
                id: pin3
                text: "____"
                size_hint: (.15, .2)
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 1,1,1,1
                font_size: 32
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'

            Label:
                id: pin4
                text: "____"
                size_hint: (.15, .2)
                background_color: 255,255,255,1 #rgba(255,255,255,1)
                color: 1,1,1,1
                font_size: 32
                font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            # pos_hint: {'center_x': .5, 'top': 1}

            Button:
                id: num1
                text: '1'
                on_press: root.do_pin_pressed('1')

            Button:
                id: num2
                text: '2'
                on_press: root.do_pin_pressed('2')

            Button:
                id: num3
                text: '3'
                on_press: root.do_pin_pressed('3')

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            # pos_hint: {'center_x': .5, 'top': 1}

            Button:
                id: num4
                text: '4'
                on_press: root.do_pin_pressed('4')

            Button:
                id: num5
                text: '5'
                on_press: root.do_pin_pressed('5')


            Button:
                id: num6
                text: '6'
                on_press: root.do_pin_pressed('6')


        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            # pos_hint: {'center_x': .5, 'top': 1}

            Button:
                id: num7
                text: '7'
                on_press: root.do_pin_pressed('7')


            Button:
                id: num8
                text: '8'
                on_press: root.do_pin_pressed('8')

            Button:
                id: num9
                text: '9'
                on_press: root.do_pin_pressed('9')

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            # pos_hint: {'center_x': .5, 'top': 1}

            Button:
                id: num7
                text: 'close'
                on_press: root.dismiss()
                # background_color: 1,1,1,0

            Button:
                id: num8
                text: '0'
                on_press: root.do_pin_pressed('0')

            Button:
                id: num9
                text: 'delete'
                on_press: root.do_pin_deleted()


#:import Factory kivy.factory.Factory
# <KeyboardPopup>:
#     name: 'keyboard'
#
#     # This is the whole pin numbers popup window
#     BoxLayout:
#         orientation: 'vertical'
#
#         # This is for the entered Pin Numbers
#         BoxLayout:
#             orientation: 'horizontal'
#
#             Label:
#                 id: pin1
#                 text: "1"
#
#             Label:
#                 id: pin1
#                 text: "2"
#
#             Label:
#                 id: pin1
#                 text: "3"
#
#             Label:
#                 id: pin1
#                 text: "4"
#
#
#         # This is for the numbers 1-3
#         BoxLayout:
#             orientation: 'horizontal'
#
#             Button:
#                 text: "test 1"
#
#         # This is for the numbers 4-6
#         BoxLayout:
#             orientation: 'horizontal'
#
#             Button:
#                 text: "test 2"
#
#         # This is for the numbers 7-9
#         BoxLayout:
#             orientation: 'horizontal'
#
#             Button:
#                 text: "test 3"
#
#         # This is for the numbers 0 with close and delete
#         BoxLayout:
#             orientation: 'horizontal'
#
#             Button:
#                 text: "test 4"

# <SettingsScreen>:
#     name: 'settings'
#
#     # Back Button
#     Button:
#         on_press: root.manager.transition.direction = 'right'
#         on_release: app.root.current = 'main'
#         size_hint: (.18, .18)
#         pos_hint: {'left': 1, 'top': 1}
#         background_color: 0, 0, 0, 0
#         text: '< Back'
#         font_name: 'assets/fonts/Avenir/AvenirNextLTPro-HeavyCn.otf'
#         font_size: 32
#
#     GridLayout:
#         cols: 2
#         row: 2
#         #spacing: 20, 20
#         padding: 100, 70
#         row_force_default: True
#         row_default_height: 44
#
#         Label:
#             text: '[b]Party Mode[/b]\n[i]Gets rid of the available config and settings[/i]'
#             text_size: self.size
#             halign: 'left'
#             valign: 'middle'
#             width: 200
#             markup: True
#         Switch:
#             #id:partyModeSwitch
#             width: 50
#
#         Label:
#             #id:label1
#             text: '[b]Pin Mode[/b]\n[i]Requires a pin for the dispensing of drinks[/i]'
#             text_size: self.size
#             halign: 'left'
#             valign: 'middle'
#             width: 200
#             markup: True
#         Switch:
#             #id:switch2
#             width: 50


    # BoxLayout:
    #     size_hint_y: None
    #     Label:
    #         text: '[anchor=a][b]Party Mode[/b]\n[i]Gets rid of the available config and settings[/i]'
    #         markup: True
    #     Switch:
    #         #id:switch1
    # BoxLayout:
    #     size_hint_y: None
    #     Label:
    #         #id:label1
    #         text: 'Label 2'
    #     Switch:
    #         #id:switch2
